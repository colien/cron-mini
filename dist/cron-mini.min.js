!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.CronMini=e():t.CronMini=e()}(self,(function(){return(()=>{var t={990:(t,e)=>{function r(t){var e=[];if(t.indexOf("-")>-1){for(var r=t.split(/[-]/g),n=parseInt(r[0]),o=Math.min(parseInt(r[1]),60),i=n;i<=o;i++)e.push(i);return e}if(t.indexOf("/")>-1){r=t.split(/[\/]/g),n=parseInt(r[0]);var s=parseInt(r[1]);for(i=n;i<=60;i+=s)e.push(i);return e}return[parseInt(t)]}function n(t,e,r){for(var n={times:[]},o=0;o<t.length;o++){var i=t[o];i>=e&&i<=r&&n.times.push(i)}return n.times.sort((function(t,e){return t-e})),n}e.CronParser=function t(e){if(!(this instanceof t))return new t(e);this.cron=e;var o=function(t){for(var e=t.split(" "),n=/^((([0-9]{1,2}([-\/][0-9]{1,2})?)(,[0-9]{1,2}([-\/][0-9]{1,2})?)*)|[\*\?])$/,o=[],i=e.length;i<6;i++)e[i].push("*");for(var s=0;s<e.length;s++){var a=e[s];if(!n.test(a))return;if("*"!=a&&"?"!=a)if(a.indexOf(",")>-1){var u=a.split(/[\,]/g),c=[];for(i=0;i<u.length;i++)c=c.concat(r(u[i]));o.push(c)}else o.push(r(a));else o.push(r("0-60"))}return o}(this.cron);this.timeEnum=function(t){if(!t)return{};for(var e={},r=0;r<t.length;r++){var o=t[r];0==r?e.second=n(o,0,59):1==r?e.minute=n(o,0,59):2==r?e.hour=n(o,0,23):3==r?e.day=n(o,1,31):4==r?e.month=n(o,1,12):e.week=n(o,1,7)}return e}(o)}},901:(t,e)=>{function r(t,e){if(!(this instanceof r))return new r(t);this.timeout=null,this.interval=null,this.opts=t,this.cb=e}r.prototype.setTimeout=function(t,e){return this.timeout=setTimeout((function(){t()}),e),this.timeout},r.prototype.setInterval=function(t,e){return this.interval=setInterval((function(){t()}),e),this.interval},r.prototype.clear=function(){this.clearInterval(),this.clearTimeout()},r.prototype.clearInterval=function(){clearInterval(this.interval),this.interval=null},r.prototype.clearTimeout=function(){clearTimeout(this.timeout),this.timeout=null},r.prototype.start=function(){var t=this,e=this.opts;e.timeout?e.interval?t.setTimeout((function(){t.setInterval((function(){t.cb()}),e.interval),e.immedi&&t.cb(),t.clearTimeout()}),e.timeout):t.setTimeout((function(){t.cb(),t.clearTimeout()}),e.timeout):e.interval?t.setInterval((function(){t.cb()}),e.interval):t.cb()},e.CustomTimer=r},648:(t,e)=>{function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t){return"[object Number]"==Object.prototype.toString.call(t)}function o(t){return t instanceof Date}var i,s,a,u;e.isObject=function(t){return"[object Object]"==Object.prototype.toString.call(t)&&null!==t},e.isFun=function(t){return"[object Function]"==Object.prototype.toString.call(t)},e.isArray=function(t){return"[object Array]"==Object.prototype.toString.call(t)},e.isString=function(t){return"[object String]"==Object.prototype.toString.call(t)},e.isNumber=n,e.isDate=o,e.getDaysInYearMonth=function(t,e,r){return r=r||0,new Date(t,e,r)},e.getTargetDate=function(t,e){var r=new Date;if(o(t)?r=t:n(t)&&(e=t),e){var i=r.getDate()+e;r=new Date(r.setDate(i))}return{year:r.getFullYear(),week:r.getDay(),month:r.getMonth()+1,day:r.getDate(),hour:r.getHours(),minute:r.getMinutes(),second:r.getSeconds(),date:r}},Array.prototype.indexOf||(Array.prototype.indexOf=function(t){var e=this.length,r=Number(arguments[1])||0;for(r<0&&(r+=e);r<e;){if(r in this&&this[r]===t)return r;r++}return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t){var e=this.length;if("function"!=typeof t)throw new TypeError;for(var r=arguments[1],n=0;n<e;n++)n in this&&t.call(r,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t){var e=this.length;if("function"!=typeof t)throw new TypeError;for(var r=new Array(e),n=arguments[1],o=0;o<e;o++)o in this&&(r[o]=t.call(n,this[o],o,this));return r}),Array.prototype.filter||(Array.prototype.filter=function(t){var e=this.length;if("function"!=typeof t)throw new TypeError;for(var r=new Array,n=arguments[1],o=0;o<e;o++)o in this&&t.call(n,this[o],o,this)&&r.push(val);return r}),Array.prototype.some||(Array.prototype.some=function(t){var e=this.length;if("function"!=typeof t)throw new TypeError;for(var r=arguments[1],n=0;n<e;n++)if(n in this&&t.call(r,this[n],n,this))return!0;return!1}),Array.prototype.every||(Array.prototype.every=function(t){var e=this.length;if("function"!=typeof t)throw new TypeError;for(var r=arguments[1],n=0;n<e;n++)if(n in this&&!t.call(r,this[n],n,this))return!1;return!0}),Object.keys||(Object.keys=(i=Object.prototype.hasOwnProperty,s=!{toString:null}.propertyIsEnumerable("toString"),u=(a=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"]).length,function(t){if("object"!==r(t)&&"function"!=typeof t||null===t)throw new TypeError("Object.keys called on non-object");var e=[];for(var n in t)i.call(t,n)&&e.push(n);if(s)for(var o=0;o<u;o++)i.call(t,a[o])&&e.push(a[o]);return e})),Object.assign||(Object.assign=function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var r=Object(t),n=1;n<arguments.length;n++){var o=arguments[n];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(r[i]=o[i])}return r})}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}var n={};return(()=>{var t=n;function e(){return e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},e.apply(this,arguments)}var o=r(990).CronParser,i=r(901).CustomTimer,s=r(648),a=s.isString,u=s.isObject,c=s.getDaysInYearMonth,p=s.getTargetDate;function f(t,e){if(!(this instanceof f))return new f(t);this.opts={},this.type,this.timers=[],this.cb=e,this.wake=t.wake||36e5,this.init(t)}function h(t,e,r,n){for(var o=t.times,i=parseInt((e+n)/r),s=parseInt((e+n)%r),a=0;a<o.length;a++)if(o[a]>=s&&s<r)return[o[a],i];return[o[0],i+1]}t.CronActuator=f,f.prototype.init=function(t){if(a(t)&&(this.type=2,this.opts=new o(t),this.opts.timeout=null,this.opts.interval=null),u(t)){var r={};t.cron?(this.type=3,r=new o(t.cron),t.timeout||(this.type=2),this.opts.interval=null):this.type=1,this.opts=e(t,r)}},f.prototype.start=function(){this.opts.real=1===this.type,this.createTimer(this.opts,1)},f.prototype.createTimer=function(t,e){var r=this,n=new i(t,(function(){r.createNextTimer(),t.real&&r.cb(t)}));this.timers.push(n),n.start()},f.prototype.createNextTimer=function(){var t=this.opts;if(1!=this.type&&t.timeEnum){var e=function(t,e){for(var r=t.timeEnum,n=r.month,o=r.week,i=r.day,s=r.hour,a=r.minute,u=r.second,f=p(),l=p(parseInt(e/36e5)),y=["second","minute","hour","day","month"],m=y.length-1;m>=0&&!((T=r[y[m]].times).indexOf(f[y[m]])<0);m--);for(var v,g,b,w,d=!1,O=[],j=0;j<y.length;j++){var T=r[y[j]].times;if(j<m)O.push(T[0]);else{if("second"==y[j]&&(v=h(u,f.second,60,1),O.push(v[0])),"minute"==y[j]&&(g=h(a,f.minute,60,v?v[1]:1),O.push(g[0])),"hour"==y[j]&&(b=h(s,f.hour,24,g?g[1]:1),O.push(b[0])),"day"==y[j]){var I=c(f.year,f.month).getDate(),x=h(i,f.day,I+1,b?b[1]:1);O.push(x[0])}"month"==y[j]&&(w=h(n,f.month,13,x?x[1]:1),O.push(w[0]))}}var A=new Date(f.year+(w?w[1]:1),O[4]-1,O[3],O[2],O[1],O[0]),S=A.getTime()<=l.date.getTime();return o.times.indexOf(A.getDay()||7)>-1&&S&&(e=A.getTime()-f.date.getTime(),d=!0),{timeLen:e,real:d}}(t,this.wake),r={timeout:e.timeLen,interval:0,real:e.real};this.createTimer(r,2)}},f.prototype.stop=f.prototype.clearAll=function(){if(this.timers&&this.timers.length)for(var t=this.timers.length-1;t>=0;t--){var e=this.timers[t];this.cancel(e)}},f.prototype.cancel=function(t,e){if(t){var r=this.timers,n=r.indexOf(t);n>=0&&r.splice(n,1),t&&t.clear()}}})(),n})()}));